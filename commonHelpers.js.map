{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixebay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(image, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const url = BASE_URL + END_POINT;\n\n  const params = {\n    key: '43041938-51a06b63921488a862c0fcc6d',\n    q: image,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    lang: 'en',\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { hideLoadIcon } from '../main';\n\nexport let checkData = true;\n// повний рендер галереї\nexport function renderImages(obj) {\n  if (obj.length === 0) {\n    hideLoadIcon();\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n    return (catchData = false);\n  }\n  const markup = obj\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n    </a>\n    <div class=\"content-image\">\n    <p class=\"pege-item\">Likes<span class=\"inf-item\">${likes}</span></p>\n    <p class=\"pege-item\">Views<span class=\"inf-item\">${views}</span></p>\n    <p class=\"pege-item\">Comments<span class=\"inf-item\">${comments}</span></p>\n    <p class=\"pege-item\">Downloads<span class=\"inf-item\">${downloads}</span></p>\n    </div>\n    </li>\n    `\n    )\n    .join('');\n  return markup;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImages } from './js/pixebay-api';\nimport { renderImages } from './js/render-functions';\nimport { checkData } from './js/render-functions';\n\nexport let image;\nlet page = 1;\nlet maxPage = 0;\nconst perSize = 15;\n\nexport const refs = {\n  formElem: document.querySelector('form'),\n  list: document.querySelector('.gallery-image'),\n  loadItem: document.querySelector('.loader-cont'),\n  btnLoad: document.querySelector('.btn-primary'),\n  loadIcon: document.querySelector('.content-loader'),\n  loadIconMore: document.querySelector('.loader'),\n};\n\nrefs.formElem.addEventListener('submit', onFormSubmit);\n\nrefs.btnLoad.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  hideLoadMore();\n  page = 1;\n  image = event.target.elements.search.value.trim();\n  refs.list.innerHTML = '';\n  if (!image && checkData) {\n    hideLoadIcon();\n    iziToast.info({\n      message: 'Line is empty, enter a value',\n      position: 'topLeft',\n    });\n    refs.list.innerHTML = '';\n    return;\n  }\n  try {\n    showLoadIcon();\n    const data = await getImages(image, page);\n    maxPage = Math.ceil(data.totalHits / perSize);\n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits));\n    lightbox.refresh();\n    checkBtnStatus();\n    hideLoadIcon();\n  } catch (err) {\n    console.log(err);\n  }\n\n  event.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  try {\n    page += 1;\n    showLoadBtn();\n    const data = await getImages(image, page);\n\n    refs.list.insertAdjacentHTML('beforeend', renderImages(data.hits));\n    hiddenLoadBtn();\n    lightbox.refresh();\n  } catch (err) {\n    console.log(err);\n  }\n  myScroll();\n  checkBtnStatus();\n}\n\nfunction checkBtnStatus() {\n  if (page >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction showLoadMore() {\n  refs.btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMore() {\n  refs.btnLoad.classList.add('hidden');\n}\n\nfunction showLoadIcon() {\n  refs.loadIcon.classList.remove('hidden');\n}\n\nexport function hideLoadIcon() {\n  refs.loadIcon.classList.add('hidden');\n}\n\nfunction showLoadBtn() {\n  refs.loadIconMore.classList.remove('hidden');\n}\n\nfunction hiddenLoadBtn() {\n  refs.loadIconMore.classList.add('hidden');\n}\n\nfunction myScroll() {\n  const item = document.querySelector('.gallery-item');\n  const height = item.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  overlayOpacity: 0.8,\n});\n"],"names":["getImages","image","currentPage","url","params","axios","checkData","renderImages","obj","hideLoadIcon","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","page","maxPage","perSize","refs","onFormSubmit","onLoadMoreClick","event","hideLoadMore","showLoadIcon","data","lightbox","checkBtnStatus","err","showLoadBtn","hiddenLoadBtn","myScroll","showLoadMore","height","SimpleLightbox"],"mappings":"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"}